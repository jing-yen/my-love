<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»™å¯çˆ±çš„å‡åº­</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background-color: #fce4ec;
            color: #333;
            text-align: center;
            overflow-x: hidden;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 30px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        h1 {
            color: #d81b60;
            font-size: 2.8em;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            opacity: 1;
            transform: translateY(0);
        }
        h2 {
            color: #e91e63;
            border-bottom: 2px solid #f8bbd0;
            padding-bottom: 10px;
            margin-top: 40px;
            font-size: 1.8em;
        }
        img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        p, blockquote, .signature, h2, hr, img {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        p.visible, blockquote.visible, .signature.visible, h2.visible, hr.visible, img.visible {
            opacity: 1;
            transform: translateY(0);
        }
        strong {
            color: #c2185b;
        }
        em {
            color: #6a1b9a;
        }
        .signature {
            margin-top: 50px;
            font-style: italic;
            color: #777;
            font-size: 1.1em;
        }
        hr {
            border: 0;
            height: 1px;
            background-image: linear-gradient(to right, rgba(233, 30, 99, 0), rgba(233, 30, 99, 0.75), rgba(233, 30, 99, 0));
            margin: 40px 0;
        }
        .small-text {
            font-size: 0.9em;
            color: #888;
            margin-top: 20px;
        }
        /* Loading Screen Styles */
        #loading-screen {
            position: fixed;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #loading-img {
            max-height: 100vh;
            max-width: 100vw;
            width: auto;
            height: 100vh;
            object-fit: contain; /* Always show the whole image, no cropping */
            display: block;
            margin: auto;
            opacity: 0;
            transition: opacity 3s ease-in;
        }
        #main-content {
            display: none;
        }
        /* For animated text cursor */
        .animated-cursor {
            display: inline-block;
            width: 1ch;
            background: none;
            animation: blink 1s steps(1) infinite;
        }
        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <img id="loading-img" class="visible" src="https://github.com/user-attachments/assets/c98b0672-8316-4f4f-80c0-8f3c09853a49" alt="Loading..." />
    </div>
    <!--audio id="myAudio" src="https://github.com/jing-yen/my-love/raw/refs/heads/main/PILLOWTALK%20-%20ZAYN.mp3"></audio-->
    <!-- Main Content -->
    <div id="main-content">
    <div class="container">
        <h1 class="content-line">ç”Ÿç—…çš„æ©™ ğŸŠ</h1>
        <p class="content-line" style="opacity: 0; height: 0">ï½ï½ï½</p>
        <img id="mainImage" src="" alt="Lovely Junting" />
        <p class="content-line" style="opacity: 0; height: 0">ï½</p>

        <p class="content-line">æ©™å•Šï¼Œè¾›è‹¦ä½ äº† ä½ ä»Šå¤©å¤´é‚£ä¹ˆç–¼ï¼Œæˆ‘çš„å¿ƒä¹Ÿç–¼ä½ çŸ¥é“å—å—å—å— ğŸ¥º </p>
        <p class="content-line">æˆ‘å¸Œæœ›ä½ æœƒå¿«å¿«å¥½èµ·ä¾†ï¼Œä¾¿æœƒä¸€åªå¿«æ¨‚çš„å°è´è¶ ğŸ¦‹</p>
        <p class="content-line">è€ƒè©¦å’Œpresentationçš„å£“åŠ›å°±åˆ¥ç®¡äº†å¥½ä¸å¥½ï½ å·®ä¸å¤šè€ƒå®Œäº†ï¼Œè€Œä¸”æˆ‘å€‘è¦å¾€å‰çœ‹å“¦å“¦å“¦ ğŸ¤— </p>
        <p class="content-line">æˆ‘ç›¸ä¿¡æ©™çš„å¯¦åŠ›ï¼Œä¸æ˜¯éœ€è¦è€ƒå·ä¾†è­‰æ˜çš„å’¯</p>

        <p class="content-line">æˆ‘æ„›ä½ æˆ‘æ„›ä½ æˆ‘æ„›ä½ ï¼ï¼ï¼æ²’æœ‰æˆ‘åœ¨èº«é‚Šä½ ä¹Ÿè¦éåˆ°å¥½å¥½çš„ï¼</p>

        <p class="content-line">çµ¦ä½ çœ‹é» reel hehe<br>
        <a href="https://www.instagram.com/reel/DKpRB0Vh5U-/?igsh=MXcxY3k3ZXB3NndsNQ==" target="_blank">REEL 1</a><br>
        <a href="https://www.instagram.com/reel/DQHSaf5EtHz/?igsh=ZGk2ODFlcGllMWJ3" target="_blank">REEL 2</a><br>
        <a href="https://www.instagram.com/reel/DNLwOSIS43J/?igsh=bTV2cmJ1bHk0eXp6" target="_blank">REEL 3</a><br>
        <a href="https://www.instagram.com/reel/DJ8mRy2gJeL/?igsh=a3ZhODEzMGdudmli" target="_blank">REEL 4</a>
        </p>
        <hr class="content-line">

        <p class="signature content-line">2025 11.13</p>

        <p class="content-line" style="opacity: 0; height: 0">ï½ï½ï½</p>
        <img src="https://github.com/user-attachments/assets/37157bbe-77d5-41d4-a33a-63b0d79db615" alt="Cute Couple" class="content-line" />
        <p class="small-text content-line">ï¼ˆä¸å“­ä¸å“­å¥½ä¸å¥½ğŸ˜­~ï¼‰</p>
    </div>
    </div>
    <script>
        // LOADING SCREEN LOGIC
        document.addEventListener('DOMContentLoaded', () => {
            const loadingImg = document.getElementById('loading-img');
            const loadingScreen = document.getElementById('loading-screen');
            const tapText = document.getElementById('tap-text');
            // Fade in loading image
            setTimeout(() => {
                loadingImg.style.opacity = '1';
                loadingScreen.classList.add('ready');
            }, 1000); // slight delay to trigger transition
            
            // Listen for tap/click (mobile and desktop)
            loadingScreen.addEventListener('click', function startApp() {
                loadingScreen.style.display = 'none';
                document.getElementById('main-content').style.display = 'block';
                // Play audio
                const audio = document.getElementById('myAudio');
                // Try to play audio reliably, guard in case audio not present
                if (audio && typeof audio.play === 'function') {
                    audio.play()
                        .then(() => {
                            // Audio started successfully
                            animateContent();
                        })
                        .catch(() => {
                            // If audio can't play, still animate
                            animateContent();
                        });
                } else {
                    // No audio element, just animate
                    animateContent();
                }
            });
        });

        // TEXT ANIMATION LOGIC
        function animateContent() {
            const contentElements = document.querySelectorAll('h1, #mainImage, .content-line');
            const h1Element = document.querySelector('h1');
            if (h1Element) h1Element.classList.add('visible');
            const revealableElements = Array.from(contentElements).filter(el => el);
            let idx = 0;

            function splitGraphemes(text) {
                if ('Segmenter' in Intl) {
                    const segmenter = new Intl.Segmenter('zh', { granularity: 'grapheme' });
                    return Array.from(segmenter.segment(text), segment => segment.segment);
                } else {
                    // Fallback: naive split, may break emojis on older browsers
                    console.warn('Intl.Segmenter not supported, falling back to naive split.');
                    return Array.from(text);
                }
            }

            // Tokenize HTML into text chunks and tags (special handling for <a> and <br>)
            function tokenizeHTML(html) {
                const tokens = [];
                let idx = 0;
                const length = html.length;
                const anchorRegex = /<a\b[^>]*>[\s\S]*?<\/a>/i;
                const brRegex = /<br\s*\/?>/i;

                while (idx < length) {
                    const rest = html.slice(idx);
                    const aMatch = rest.match(anchorRegex);
                    const brMatch = rest.match(brRegex);

                    let nextAIndex = aMatch ? aMatch.index : -1;
                    let nextBrIndex = brMatch ? brMatch.index : -1;

                    // Determine next match among a or br
                    let nextIndex = -1;
                    let matchText = null;
                    let matchType = null;

                    if (nextAIndex >= 0 && (nextBrIndex === -1 || nextAIndex <= nextBrIndex)) {
                        nextIndex = nextAIndex;
                        matchText = aMatch[0];
                        matchType = 'a';
                    } else if (nextBrIndex >= 0) {
                        nextIndex = nextBrIndex;
                        matchText = brMatch[0];
                        matchType = 'br';
                    }

                    if (nextIndex === -1) {
                        // no more tags we care about
                        tokens.push({ type: 'text', content: rest });
                        break;
                    }

                    if (nextIndex > 0) {
                        tokens.push({ type: 'text', content: rest.slice(0, nextIndex) });
                    }

                    if (matchType === 'a' || matchType === 'br') {
                        tokens.push({ type: 'tag', html: matchText });
                    }

                    idx += nextIndex + matchText.length;
                }

                return tokens;
            }

            function animateTextLine(element, htmlText, cb) {
                // Clear the element content (we will build it)
                element.textContent = "";
                // Create cursor
                let cursor = document.createElement('span');
                cursor.className = 'animated-cursor';
                cursor.textContent = '|';
                element.appendChild(cursor);

                const tokens = tokenizeHTML(htmlText);
                let tokenIdx = 0;

                function processNextToken() {
                    if (tokenIdx >= tokens.length) {
                        // done
                        element.removeChild(cursor);
                        if (typeof cb === 'function') cb();
                        return;
                    }
                    const token = tokens[tokenIdx];
                    if (token.type === 'tag') {
                        // Insert tag HTML as DOM node(s) intact (so <a> works)
                        const temp = document.createElement('div');
                        temp.innerHTML = token.html;
                        // Insert each child node before the cursor
                        while (temp.firstChild) {
                            element.insertBefore(temp.firstChild, cursor);
                        }
                        tokenIdx++;
                        // small pause after inserting a tag
                        setTimeout(processNextToken, 200);
                    } else if (token.type === 'text') {
                        const graphemes = splitGraphemes(token.content);
                        let i = 0;
                        function showNextCharInToken() {
                            if (i < graphemes.length) {
                                const g = graphemes[i];
                                const span = document.createElement('span');
                                span.textContent = g;
                                element.insertBefore(span, cursor);
                                i++;
                                let delay = 100;
                                if (g === 'ï¼Œ' || g === ' ') delay = 300;
                                if (g === 'ï¼Œ' || g === 'ã€‚' || g === 'ï¼' || g === 'ï½') delay = 800;
                                setTimeout(showNextCharInToken, delay);
                            } else {
                                tokenIdx++;
                                // brief pause between tokens
                                setTimeout(processNextToken, 150);
                            }
                        }
                        showNextCharInToken();
                    } else {
                        tokenIdx++;
                        setTimeout(processNextToken, 100);
                    }
                }

                processNextToken();
            }

            function animateNext() {
                if (idx >= revealableElements.length) {
                    setTimeout(() => {
                        window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'});
                    }, 1000);
                    return;
                }
                const element = revealableElements[idx];
                element.classList.add('visible');
                element.scrollIntoView({behavior: 'smooth', block: 'end'});
                if (element.tagName === 'P' || element.tagName === 'H2') {
                    // Use innerHTML so we can preserve <a> and <br>
                    animateTextLine(element, element.innerHTML, () => {
                        idx++;
                        animateNext();
                    });
                } else {
                    setTimeout(() => {
                        idx++;
                        animateNext();
                    }, 500);
                }
            }
            animateNext();
        }
    </script>
</body>
</html>
